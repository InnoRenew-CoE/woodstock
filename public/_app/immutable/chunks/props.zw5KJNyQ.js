import{W as B,$ as h,g as l,a9 as M,ac as Y,e as C,ad as $,ae as x,af as G,ag as j,ah as z,u as L,ai as H,aj as Q,ab as y,ak as V,a1 as W,al as Z,am as J,S as K,an as X,d as D,Q as k,F as N,ao as ee}from"./runtime.yYShR0qK.js";import{p as re}from"./misc.DRzOhjZg.js";import{s as ae,g as ne}from"./index.squxxUV3.js";let o=!1,I=Symbol();function fe(e,r,n){const u=n[r]??(n[r]={store:null,source:B(void 0),unsubscribe:h});if(u.store!==e&&!(I in n))if(u.unsubscribe(),u.store=e??null,e==null)u.source.v=void 0,u.unsubscribe=h;else{var c=!0;u.unsubscribe=ae(e,i=>{c?u.source.v=i:C(u.source,i)}),c=!1}return e&&I in n?ne(e):l(u.source)}function _e(e,r){return e.set(r),r}function le(){const e={};function r(){M(()=>{for(var n in e)e[n].unsubscribe();Y(e,I,{enumerable:!1,value:!0})})}return[e,r]}function ce(){o=!0}function ue(e){var r=o;try{return o=!1,[e(),o]}finally{o=r}}function w(e){for(var r=N,n=N;r!==null&&!(r.f&(H|Q));)r=r.parent;try{return y(r),e()}finally{y(n)}}function ve(e,r,n,u){var T;var c=(n&V)!==0,i=!W||(n&Z)!==0,b=(n&J)!==0,F=(n&ee)!==0,O=!1,s;b?[s,O]=ue(()=>e[r]):s=e[r];var U=K in e||X in e,v=b&&(((T=$(e,r))==null?void 0:T.set)??(U&&r in e&&(a=>e[r]=a)))||void 0,t=u,S=!0,g=!1,R=()=>(g=!0,S&&(S=!1,F?t=L(u):t=u),t);s===void 0&&u!==void 0&&(v&&i&&x(),s=R(),v&&v(s));var f;if(i)f=()=>{var a=e[r];return a===void 0?R():(S=!0,g=!1,a)};else{var p=w(()=>(c?D:k)(()=>e[r]));p.f|=G,f=()=>{var a=l(p);return a!==void 0&&(t=void 0),a===void 0?t:a}}if(!(n&j))return f;if(v){var q=e.$$legacy;return function(a,_){return arguments.length>0?((!i||!_||q||O)&&v(_?f():a),a):f()}}var P=!1,A=!1,m=B(s),d=w(()=>D(()=>{var a=f(),_=l(m);return P?(P=!1,A=!0,_):(A=!1,m.v=a)}));return c||(d.equals=z),function(a,_){if(arguments.length>0){const E=_?l(d):i&&b?re(a):a;return d.equals(E)||(P=!0,C(m,E),g&&t!==void 0&&(t=E),L(()=>l(d))),a}return l(d)}}export{fe as a,_e as b,ce as m,ve as p,le as s};
