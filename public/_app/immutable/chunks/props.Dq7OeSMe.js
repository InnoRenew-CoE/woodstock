import{J as U,v as L,g as l,B as F,H as Y,e as w,K as G,L as $,M as x,P as z,N as H,u as h,O as V,R as J,D,Q as K,z as Q,T as W,U as X,S as Z,V as j,d as N,W as k,G as y,X as ee}from"./runtime.DYzcDKcF.js";import{p as re}from"./misc.zxKZcHum.js";import{s as ne,g as ae}from"./index.B2dr9N-b.js";let o=!1,I=Symbol();function fe(e,r,a){const u=a[r]??(a[r]={store:null,source:U(void 0),unsubscribe:L});if(u.store!==e&&!(I in a))if(u.unsubscribe(),u.store=e??null,e==null)u.source.v=void 0,u.unsubscribe=L;else{var v=!0;u.unsubscribe=ne(e,i=>{v?u.source.v=i:w(u.source,i)}),v=!1}return e&&I in a?ae(e):l(u.source)}function _e(e,r){return e.set(r),r}function le(){const e={};function r(){F(()=>{for(var a in e)e[a].unsubscribe();Y(e,I,{enumerable:!1,value:!0})})}return[e,r]}function ve(){o=!0}function ue(e){var r=o;try{return o=!1,[e(),o]}finally{o=r}}function B(e){for(var r=y,a=y;r!==null&&!(r.f&(V|J));)r=r.parent;try{return D(r),e()}finally{D(a)}}function ce(e,r,a,u){var A;var v=(a&K)!==0,i=!Q||(a&W)!==0,b=(a&X)!==0,C=(a&ee)!==0,O=!1,s;b?[s,O]=ue(()=>e[r]):s=e[r];var M=Z in e||j in e,c=b&&(((A=G(e,r))==null?void 0:A.set)??(M&&r in e&&(n=>e[r]=n)))||void 0,t=u,S=!0,P=!1,R=()=>(P=!0,S&&(S=!1,C?t=h(u):t=u),t);s===void 0&&u!==void 0&&(c&&i&&$(),s=R(),c&&c(s));var f;if(i)f=()=>{var n=e[r];return n===void 0?R():(S=!0,P=!1,n)};else{var T=B(()=>(v?N:k)(()=>e[r]));T.f|=x,f=()=>{var n=l(T);return n!==void 0&&(t=void 0),n===void 0?t:n}}if(!(a&z))return f;if(c){var q=e.$$legacy;return function(n,_){return arguments.length>0?((!i||!_||q||O)&&c(_?f():n),n):f()}}var g=!1,p=!1,E=U(s),d=B(()=>N(()=>{var n=f(),_=l(E);return g?(g=!1,p=!0,_):(p=!1,E.v=n)}));return v||(d.equals=H),function(n,_){if(arguments.length>0){const m=_?l(d):i&&b?re(n):n;return d.equals(m)||(g=!0,w(E,m),P&&t!==void 0&&(t=m),h(()=>l(d))),n}return l(d)}}export{fe as a,_e as b,ve as m,ce as p,le as s};
