import{T as w,$ as h,g as l,a9 as M,aa as Y,e as B,ab as $,ac as x,ad as G,ae as j,af as z,u as L,ag as H,ah as V,ai as y,aj as Z,a1 as J,ak as K,al as Q,S as W,am as X,d as C,O as k,C as D,an as ee}from"./runtime.CcwmAM-d.js";import{p as re}from"./events.B32aMe5-.js";import{s as ae,g as ne}from"./index.DYnGUOP-.js";let o=!1,I=Symbol();function fe(e,r,n){const u=n[r]??(n[r]={store:null,source:w(void 0),unsubscribe:h});if(u.store!==e&&!(I in n))if(u.unsubscribe(),u.store=e??null,e==null)u.source.v=void 0,u.unsubscribe=h;else{var c=!0;u.unsubscribe=ae(e,i=>{c?u.source.v=i:B(u.source,i)}),c=!1}return e&&I in n?ne(e):l(u.source)}function _e(e,r){return e.set(r),r}function le(){const e={};function r(){M(()=>{for(var n in e)e[n].unsubscribe();Y(e,I,{enumerable:!1,value:!0})})}return[e,r]}function ce(){o=!0}function ue(e){var r=o;try{return o=!1,[e(),o]}finally{o=r}}function N(e){for(var r=D,n=D;r!==null&&!(r.f&(H|V));)r=r.parent;try{return y(r),e()}finally{y(n)}}function ve(e,r,n,u){var A;var c=(n&Z)!==0,i=!J||(n&K)!==0,b=(n&Q)!==0,U=(n&ee)!==0,O=!1,s;b?[s,O]=ue(()=>e[r]):s=e[r];var q=W in e||X in e,v=b&&(((A=$(e,r))==null?void 0:A.set)??(q&&r in e&&(a=>e[r]=a)))||void 0,t=u,S=!0,g=!1,R=()=>(g=!0,S&&(S=!1,U?t=L(u):t=u),t);s===void 0&&u!==void 0&&(v&&i&&x(),s=R(),v&&v(s));var f;if(i)f=()=>{var a=e[r];return a===void 0?R():(S=!0,g=!1,a)};else{var T=N(()=>(c?C:k)(()=>e[r]));T.f|=G,f=()=>{var a=l(T);return a!==void 0&&(t=void 0),a===void 0?t:a}}if(!(n&j))return f;if(v){var F=e.$$legacy;return function(a,_){return arguments.length>0?((!i||!_||F||O)&&v(_?f():a),a):f()}}var P=!1,p=!1,m=w(s),d=N(()=>C(()=>{var a=f(),_=l(m);return P?(P=!1,p=!0,_):(p=!1,m.v=a)}));return c||(d.equals=z),function(a,_){if(arguments.length>0){const E=_?l(d):i&&b?re(a):a;return d.equals(E)||(P=!0,B(m,E),g&&t!==void 0&&(t=E),L(()=>l(d))),a}return l(d)}}export{fe as a,_e as b,ce as m,ve as p,le as s};
