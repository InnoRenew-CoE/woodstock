import{U as w,$ as h,g as l,a3 as M,a6 as Y,e as B,a7 as $,a8 as x,a9 as G,aa as z,ab as H,u as D,ac as V,ad as Z,a5 as L,ae as j,a1 as J,af as K,ag as Q,S as W,ah as X,d as y,P as k,D as N,ai as ee}from"./runtime.B46tO8CP.js";import{p as re}from"./misc.CsnfvPJ4.js";import{s as ae,g as ne}from"./index.BTD3Vlzm.js";let o=!1,I=Symbol();function fe(e,r,n){const u=n[r]??(n[r]={store:null,source:w(void 0),unsubscribe:h});if(u.store!==e&&!(I in n))if(u.unsubscribe(),u.store=e??null,e==null)u.source.v=void 0,u.unsubscribe=h;else{var c=!0;u.unsubscribe=ae(e,i=>{c?u.source.v=i:B(u.source,i)}),c=!1}return e&&I in n?ne(e):l(u.source)}function _e(e,r){return e.set(r),r}function le(){const e={};function r(){M(()=>{for(var n in e)e[n].unsubscribe();Y(e,I,{enumerable:!1,value:!0})})}return[e,r]}function ce(){o=!0}function ue(e){var r=o;try{return o=!1,[e(),o]}finally{o=r}}function U(e){for(var r=N,n=N;r!==null&&!(r.f&(V|Z));)r=r.parent;try{return L(r),e()}finally{L(n)}}function ve(e,r,n,u){var T;var c=(n&j)!==0,i=!J||(n&K)!==0,b=(n&Q)!==0,C=(n&ee)!==0,O=!1,s;b?[s,O]=ue(()=>e[r]):s=e[r];var q=W in e||X in e,v=b&&(((T=$(e,r))==null?void 0:T.set)??(q&&r in e&&(a=>e[r]=a)))||void 0,t=u,S=!0,P=!1,R=()=>(P=!0,S&&(S=!1,C?t=D(u):t=u),t);s===void 0&&u!==void 0&&(v&&i&&x(),s=R(),v&&v(s));var f;if(i)f=()=>{var a=e[r];return a===void 0?R():(S=!0,P=!1,a)};else{var p=U(()=>(c?y:k)(()=>e[r]));p.f|=G,f=()=>{var a=l(p);return a!==void 0&&(t=void 0),a===void 0?t:a}}if(!(n&z))return f;if(v){var F=e.$$legacy;return function(a,_){return arguments.length>0?((!i||!_||F||O)&&v(_?f():a),a):f()}}var g=!1,A=!1,E=w(s),d=U(()=>y(()=>{var a=f(),_=l(E);return g?(g=!1,A=!0,_):(A=!1,E.v=a)}));return c||(d.equals=H),function(a,_){if(arguments.length>0){const m=_?l(d):i&&b?re(a):a;return d.equals(m)||(g=!0,B(E,m),P&&t!==void 0&&(t=m),D(()=>l(d))),a}return l(d)}}export{fe as a,_e as b,ce as m,ve as p,le as s};
