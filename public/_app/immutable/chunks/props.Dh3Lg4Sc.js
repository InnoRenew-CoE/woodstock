import{I as U,o as L,g as l,A as q,G as Y,e as w,J as G,K as $,L as x,P as V,M as z,u as h,N as H,R as J,C as y,O as K,y as Q,Q as W,T as Z,S as j,U as X,d as N,V as k,F as C,W as ee}from"./runtime.C8AwBc5t.js";import{p as re}from"./misc.y5E7LmGA.js";import{s as ne,g as ae}from"./index.BlsGO1ZL.js";let o=!1,I=Symbol();function fe(e,r,a){const u=a[r]??(a[r]={store:null,source:U(void 0),unsubscribe:L});if(u.store!==e&&!(I in a))if(u.unsubscribe(),u.store=e??null,e==null)u.source.v=void 0,u.unsubscribe=L;else{var v=!0;u.unsubscribe=ne(e,i=>{v?u.source.v=i:w(u.source,i)}),v=!1}return e&&I in a?ae(e):l(u.source)}function _e(e,r){return e.set(r),r}function le(){const e={};function r(){q(()=>{for(var a in e)e[a].unsubscribe();Y(e,I,{enumerable:!1,value:!0})})}return[e,r]}function ve(){o=!0}function ue(e){var r=o;try{return o=!1,[e(),o]}finally{o=r}}function D(e){for(var r=C,a=C;r!==null&&!(r.f&(H|J));)r=r.parent;try{return y(r),e()}finally{y(a)}}function ce(e,r,a,u){var p;var v=(a&K)!==0,i=!Q||(a&W)!==0,b=(a&Z)!==0,B=(a&ee)!==0,O=!1,s;b?[s,O]=ue(()=>e[r]):s=e[r];var F=j in e||X in e,c=b&&(((p=G(e,r))==null?void 0:p.set)??(F&&r in e&&(n=>e[r]=n)))||void 0,t=u,S=!0,P=!1,R=()=>(P=!0,S&&(S=!1,B?t=h(u):t=u),t);s===void 0&&u!==void 0&&(c&&i&&$(),s=R(),c&&c(s));var f;if(i)f=()=>{var n=e[r];return n===void 0?R():(S=!0,P=!1,n)};else{var A=D(()=>(v?N:k)(()=>e[r]));A.f|=x,f=()=>{var n=l(A);return n!==void 0&&(t=void 0),n===void 0?t:n}}if(!(a&V))return f;if(c){var M=e.$$legacy;return function(n,_){return arguments.length>0?((!i||!_||M||O)&&c(_?f():n),n):f()}}var g=!1,T=!1,E=U(s),d=D(()=>N(()=>{var n=f(),_=l(E);return g?(g=!1,T=!0,_):(T=!1,E.v=n)}));return v||(d.equals=z),function(n,_){if(arguments.length>0){const m=_?l(d):i&&b?re(n):n;return d.equals(m)||(g=!0,w(E,m),P&&t!==void 0&&(t=m),h(()=>l(d))),n}return l(d)}}export{fe as a,_e as b,ve as m,ce as p,le as s};
