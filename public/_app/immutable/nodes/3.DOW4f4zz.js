import{a as b,t as h}from"../chunks/disclose-version.B6brLfQp.js";import{t as q,g as i,c as d,s as p,d as S,r as c,p as O,a as D,e as g,b as y}from"../chunks/runtime.c5mLyVwc.js";import{s as Y,i as j}from"../chunks/if.Dn-yF_Du.js";import{d as G,p as _}from"../chunks/events.CZrWHxYZ.js";import{t as L,a as M}from"../chunks/index.CM9SCo8T.js";import{b as H}from"../chunks/window.BmD6LNOw.js";import{o as K}from"../chunks/index-client.wWOH9rYb.js";import{g as A}from"../chunks/entry.DUSRWlk1.js";import{P}from"../chunks/public.CD978DOo.js";import{v as Q}from"../chunks/index.bULXYJUV.js";import{M as V,r as B,s as z,a as X}from"../chunks/MaskedIcon.D0kNG2rC.js";import{a as Z,b as $}from"../chunks/input.PrMxpJ1s.js";import{p as m}from"../chunks/props.BpE8x14n.js";import"../chunks/SuggestiveInput.D5lXl7OR.js";import{p as x}from"../chunks/notifications.C0gHY5GQ.js";var ee=h('<label class="select-none cursor-pointer rounded flex items-center gap-3"><input class="hidden" type="checkbox"> <!> </label>');function te(f,e){m(e,"class",3,"");let n=m(e,"checked",15);var a=ee(),r=d(a);B(r);var t=p(r,2),l=S(()=>` ${(n()?"./checkmark-selected-box.svg":"./checkmark-box.svg")??""}`),u=S(()=>`size-4 ${(n()?"bg-secondary":"bg-black")??""}`);V(t,{get src(){return i(l)},get class(){return i(u)}});var o=p(t);c(a),q(()=>Y(o,` ${e.label??""}`)),Z(r,n),b(f,a)}var ae=h('<div class="flex gap-2 items-center bg-white hover:border-secondary border border-background focus:shadow rounded-md group font-sans focus-within:border-secondary"><!> <input></div>');function N(f,e){let n=m(e,"type",3,"text"),a=m(e,"class",3,""),r=m(e,"value",15);m(e,"icon",3,void 0);let t=m(e,"required",3,!1);var l=ae(),u=d(l);j(u,w=>{});var o=p(u,2);B(o),c(l),q(()=>{o.required=t(),z(o,"type",n()),z(o,"placeholder",e.placeholder),X(o,`w-full px-5 py-2 outline-none transition-all ease-in-out rounded-r-lg placeholder:text-primary/30 bg-transparent ${a()??""} svelte-33uumo`)}),$(o,r),b(f,l)}async function re(f,e,n,a){const r={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i(e),password:i(n)})};if(i(a))(await fetch(`${P}/register`,r)).status===200?(x({body:"You'll receive an email with newly generated password.",title:"Request successful"}),g(a,!1)):x({body:"You're not on our whitelist. Please notify us at ewco@innorenew.eu",title:"Request failed"});else{const t=await fetch(`${P}/login`,r);t.status===200?(x({body:"Succesfull login",title:"Welcome"}),await A("/app"),console.log(t.headers.getSetCookie())):x({body:"Incorrect login credentials",title:"Failure to login"})}}var se=h("<div><!></div>"),oe=h(`<div><p class="bg-white/70 p-3 rounded-lg shadow-sm border border-white text-secondary/80">You'll receive an email with password for you to access the app.</p></div>`),ie=h('<div class="flex sm:items-center justify-center h-full p-10"><div class="grid gap-2 max-w-[500px] w-full sm:w-[80%] h-min"><div class="grid p-8 px-10 glass gap-5 bg-white/60"><div class="flex gap-3 items-center font-roboto font-semibold text-2xl text-black">Login <span><img src="./info.svg" alt="Information" class="w-3"></span></div> <div><div class="text-sm pb-1 font-nunito text-primary/30">E-mail</div> <!></div> <!> <!> <button type="submit" class="transition-all hover:bg-secondary/80 hover:border-secondary cursor-pointer bg-primary border border-accent/80 rounded-lg p-2 text-white grid grid-cols-[1rem_auto_1rem] items-center gap-4 group"><div class="row-start-1 col-start-2"> </div></button></div></div></div>');function xe(f,e){O(e,!0);let n=y(0),a=y(""),r=y(""),t=y(!1);K(async()=>{await Q()===200&&await A("/app")});var l=ie(),u=d(l),o=d(u),w=p(d(o),2),E=p(d(w),2);N(E,{required:!0,placeholder:"you@organisation.eu",type:"email",icon:"../email.svg",get value(){return i(a)},set value(s){g(a,_(s))}}),c(w);var I=p(w,2);te(I,{label:"Request access",get checked(){return i(t)},set checked(s){g(t,_(s))}});var C=p(I,2);{var T=s=>{var v=se(),F=d(v);N(F,{required:!0,placeholder:"*****",type:"password",icon:"../password.svg",get value(){return i(r)},set value(J){g(r,_(J))}}),c(v),L(1,v,()=>M),b(s,v)},U=s=>{var v=oe();L(1,v,()=>M),b(s,v)};j(C,s=>{i(t)?s(U,!1):s(T)})}var k=p(C,2);k.__click=[re,a,r,t];var R=d(k),W=d(R,!0);c(R),c(k),c(o),c(u),c(l),q(()=>Y(W,i(t)?"Request":"Login")),H("innerWidth",s=>g(n,_(s))),b(f,l),D()}G(["click"]);export{xe as component};
