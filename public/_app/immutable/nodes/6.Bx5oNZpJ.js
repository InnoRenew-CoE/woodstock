import{a as n,t as x,d as ae,e as Ve}from"../chunks/disclose-version.DH-BQlow.js";import{l as rt,o as ft,_ as gt,aK as pt,ao as _t,k as mt,A as xt,z as bt,x as ht,Z as yt,p as me,c as r,s as c,r as a,t as C,g as e,a as xe,d as T,e as L,b as ce,a2 as Qe,ap as W,n as Oe}from"../chunks/runtime.CcwmAM-d.js";import{s as j}from"../chunks/render.DTZvhm4W.js";import{i as F}from"../chunks/if.DXHVr7Lc.js";import{e as ue,i as fe}from"../chunks/each.B61yJSWs.js";import{d as qe,p as U,e as wt,r as kt}from"../chunks/events.B32aMe5-.js";import{r as et,a as de,b as ot,M as re,s as lt,c as St,t as qt}from"../chunks/MaskedIcon.ICzUKyIO.js";import{t as ve,a as zt,f as Ce,s as st}from"../chunks/index.CN7QcmAH.js";import{b as Mt}from"../chunks/window.MZy-IhhE.js";import{p as R,s as Be,a as Se,m as We,b as Ge}from"../chunks/props.BgWAryMo.js";import{S as At}from"../chunks/Spacer.BcWdeerm.js";import{P as tt}from"../chunks/public.CD978DOo.js";import{w as De}from"../chunks/index.DYnGUOP-.js";import{p as Tt}from"../chunks/notifications.DQM-S8cS.js";import{b as nt,c as Ft}from"../chunks/input.YmDjCN4Q.js";import{o as Nt}from"../chunks/index-client.OmNVWMHD.js";function Pt(d,t,s){rt&&ft();var p=d,l=yt,i,h=gt()?pt:_t;mt(()=>{h(l,l=t())&&(i&&xt(i),i=bt(()=>s(p)))}),rt&&(p=ht)}var ke=(d=>(d[d.Text=0]="Text",d[d.Select=1]="Select",d[d.MultiSelect=2]="MultiSelect",d[d.Tags=3]="Tags",d[d.MultiText=4]="MultiText",d))(ke||{});const Re=De([]),$e=De(),Ke=De(),dt=De([]),ct=De([]);async function Ut(){const d=await fetch(`${tt}/api/questions`),{questions:t,available_tags:s}=await d.json();dt.set(t.toSorted((p,l)=>p.id-l.id)),ct.set(s)}async function jt(d,t){Re.set(Array.from(d).map(s=>({file:s.name,progress:0})));for(let s of Array.from(d)){const p=t.find(h=>h.file===s.name);if(!p){console.error(`Unable to find answers for file ${s.name}`);continue}const l=new FormData;l.append("answers",JSON.stringify(p.answers)),l.append("file",s,s.name);const i=new XMLHttpRequest;i.open("POST",`${tt}/api/answers`),i.upload.onprogress=h=>{if(h.lengthComputable){const v=h.loaded/h.total*100,g=v.toFixed(2);console.log(`Uploaded: ${g}%`),Re.update(o=>{const _=o.find(z=>z.file===s.name);return _&&(_.progress=v),o})}},i.send(l)}}async function Ct(d){for(let t of Array.from(d)){const s=new FormData;s.append("file",t,t.name);const p=new XMLHttpRequest;p.open("POST",`${tt}/api/submit`),p.upload.onprogress=l=>{if(l.lengthComputable){const i=l.loaded/l.total*100,h=i.toFixed(2);console.log(`Uploaded: ${h}%`),Re.update(v=>{const g=v.find(o=>o.file===t.name);return g&&(g.progress=i),v})}},p.send(s)}Tt({title:"Submission successful",body:"Thank you for your submission. Processing has been scheduled."})}var Dt=(d,t)=>t(d),It=x('<label><input class="hidden" type="checkbox"> </label>');function Lt(d,t){me(t,!0);let s=R(t,"group",31,()=>U([]));R(t,"class",3,"");let p=R(t,"multiple",3,!0);const l=()=>typeof t.value=="number"?+t.value:t.value;let i=T(()=>s().includes(l()));function h(_){const z=l();e(i)?s(s().filter(m=>m!==z)):s().includes(z)||(p()?s([...s(),z]):s([z]))}var v=It(),g=r(v);et(g),g.__change=[Dt,h];var o=c(g);a(v),C(()=>{de(v,`transition-all select-none glass px-5 py-3 ${(e(i)?"bg-secondary/10 text-secondary border-secondary hover:bg-red-100 hover:text-red-400 hover:border-red-400 ":"hover:bg-secondary/10 hover:border-secondary hover:text-accent")??""}`),ot(g,t.value),j(o,` ${t.label??""}`)}),n(d,v),xe()}qe(["change"]);var Et=(d,t,s)=>t(e(s)),Ot=x('<li class="transition-all glass px-3 py-2 rounded-lg bg-secondary/5 border-secondary/20 shadow-secondary/10 cursor-pointer hover:bg-red-300/10 hover:border-red-300 hover:shadow-red-300"> </li>'),Rt=(d,t,s)=>t(e(s)),$t=x('<li class="w-min rounded-sm border bg-secondary/20 border-secondary text-secondary px-3 py-1 hover:bg-accent/80 hover:border-accent cursor-pointer hover:text-white transition-all text-nowrap"> </li>'),Bt=x(`<span class="text-amber-600">You're the first one to add this tag!</span>`),Ht=x('<div class="select-none z-10 absolute top-[110%] right-0 left-0 bg-gray-50 p-5 rounded-lg shadow border border-white"><div class="opacity-50 font-mono pb-3">Tag Suggestions</div> <ul class="max-h-[100px] flex items-center gap-3 overflow-auto list-none"></ul> <!></div>'),Yt=x('<div class="grid w-full gap-3 relative"><input autocomplete="off" id="tag-input" class="outline-none focus:border-secondary rounded-xl glass appearance-none px-3 py-2 w-full" placeholder="Eg: wood, glue, ..."> <ul class="flex gap-3"></ul> <!></div>');function Jt(d,t){me(t,!0);let s=R(t,"selected",15),p=ce("");async function l(m){if(m.code.match(/Comma|Enter/)){m.preventDefault();const b=e(p);L(p,""),i(b)}}async function i(m){m.length>=2&&s().find(b=>b===m)===void 0&&s([...s(),m]),L(p,""),console.log(s()),s(s())}async function h(m){s(s().filter(b=>b!==m))}var v=Yt(),g=r(v);et(g);var o=c(g,2);ue(o,21,s,fe,(m,b)=>{var f=Ot();f.__click=[Et,h,b];var k=r(f,!0);a(f),C(()=>j(k,e(b))),ve(1,f,()=>zt,()=>({x:150})),n(m,f)}),a(o);var _=c(o,2);{var z=m=>{var b=Ht(),f=c(r(b),2);ue(f,21,()=>t.options.filter(q=>q.includes(e(p))),fe,(q,u)=>{var M=$t();M.__click=[Rt,i,u];var E=r(M,!0);a(M),C(()=>j(E,e(u))),ve(1,M,()=>Ce),n(q,M)}),a(f);var k=c(f,2);{var N=q=>{var u=Bt();n(q,u)};F(k,q=>{t.options.filter(u=>u.includes(e(p))).length===0&&q(N)})}a(b),ve(1,f,()=>Ce),ve(1,b,()=>Ce),n(m,b)};F(_,m=>{e(p).length>0&&m(z)})}a(v),wt("keypress",g,l),nt(g,()=>e(p),m=>L(p,m)),n(d,v),xe()}qe(["click"]);var Xt=x('<textarea placeholder="Answer here..." class="glass p-5 min-h-[100px] resize-none w-full"></textarea>'),Zt=x('<div class="glass p-2 hover:bg-red-50 cursor-pointer"><!></div>'),Kt=x('<div class="flex items-center gap-3"><input placeholder="Type here..." class="glass p-5 py-2 resize-none w-full"> <!></div>'),Vt=x('<div class="grid w-full gap-3 py-5"></div>'),Wt=x('<div class="grid sm:flex gap-3 w-full items-stretch flex-wrap"></div>'),Gt=x('<div><div class="glass p-8"><div class="text-lg font-semibold"> </div> <div> </div></div> <div class="mt-5 flex gap-5 items-center justify-center flex-wrap"><!></div></div>');function Qt(d,t){me(t,!0);const[s,p]=Be(),l=()=>Se(ct,"$tagsStore",s);let i=R(t,"answer",15),h=R(t,"proceed",15,!1),v=ce(U(i().selection)),g=ce(U(i().text)),o=ce(U(i().tags)),_=ce(U([""]));Qe(()=>{var k;if(i(i().selection=e(v),!0),i(i().text=e(g),!0),i(i().tags=e(o),!0),t.question.question_type===ke.MultiText){const N=e(_).filter(q=>q.trim().length!==0);N.length>0&&i(i().text=JSON.stringify(N),!0)}h(i().selection.length>0||(((k=i().text)==null?void 0:k.length)??0)>0||i().tags.length>0)});var z=ae(),m=W(z);{var b=k=>{var N=Gt(),q=r(N),u=r(q),M=r(u,!0);a(u);var E=c(u,2),X=r(E,!0);a(E),a(q);var H=c(q,2),ze=r(H);{var Me=w=>{var O=Xt();kt(O),nt(O,()=>e(g),se=>L(g,se)),n(w,O)},y=w=>{var O=ae(),se=W(O);{var ge=D=>{var Y=Vt();ue(Y,21,()=>e(_),fe,(Z,pe,G)=>{var $=Kt(),B=r($);et(B),B.__keyup=Q=>{const J=Q.currentTarget.value??"";e(_)[G]=J,J.trim().length>0&&e(_).find(S=>S.length===0)===void 0&&L(_,U([...e(_),""]))};var Ae=c(B,2);{var _e=Q=>{var J=Zt();J.__click=()=>{L(_,U(e(_).toSpliced(G,1))),L(_,U([...e(_)]))};var S=r(J);re(S,{src:"/x-close.svg",class:"size-4 bg-red-600"}),a(J),n(Q,J)};F(Ae,Q=>{e(_).length>1&&Q(_e)})}a($),C(()=>ot(B,e(_)[G])),n(Z,$)}),a(Y),n(D,Y)},be=D=>{var Y=ae(),Z=W(Y);{var pe=$=>{Jt($,{get options(){return l()},get selected(){return e(o)},set selected(B){L(o,U(B))}})},G=$=>{var B=Wt();ue(B,21,()=>t.question.possible_answers.toSorted(),fe,(Ae,_e)=>{var Q=T(()=>t.question.question_type===ke.MultiSelect);Lt(Ae,{get label(){return e(_e).value},get value(){return e(_e).id},get multiple(){return e(Q)},get group(){return e(v)},set group(J){L(v,U(J))}})}),a(B),n($,B)};F(Z,$=>{t.question.question_type===ke.Tags?$(pe):$(G,!1)},!0)}n(D,Y)};F(se,D=>{t.question.question_type===ke.MultiText?D(ge):D(be,!1)},!0)}n(w,O)};F(ze,w=>{t.question.question_type===ke.Text?w(Me):w(y,!1)})}a(H),a(N),C(()=>{j(M,t.question.title),j(X,t.question.text)}),n(k,N)},f=k=>{var N=Ve();C(()=>j(N,h(!0))),n(k,N)};F(m,k=>{i()?k(b):k(f,!1)})}n(d,z),xe(),p()}qe(["keyup","click"]);var ea=x('<div><label class="text-secondary/80 glass bg-secondary/10 border-secondary/50 flex gap-3 p-2 py-1 items-center justify-center hover:brightness-[90%] cursor-pointer"><div class="glass p-2 rounded-full bg-white/70"><!></div> <div class="text-center px-5"> </div> <input class="hidden" type="file"></label></div>');function it(d,t){me(t,!0);let s=R(t,"text",3,"Select files"),p=R(t,"files",15),l=R(t,"multiple",3,!0),i=R(t,"class",3,""),h=R(t,"accept",3,"");var v=ea();const g=T(()=>St(qt("w-min text-nowrap",i())));var o=r(v),_=r(o),z=r(_);re(z,{src:"../download.svg",class:"size-4 bg-secondary rotate-180"}),a(_);var m=c(_,2),b=r(m,!0);a(m);var f=c(m,2);a(o),a(v),C(()=>{de(v,e(g)),j(b,s()),f.multiple=l(),lt(f,"accept",h())}),Ft(f,p),n(d,v),xe()}var ta=x('<button class="bg-primary p-3 rounded-2xl text-white">Submit</button>'),aa=x('<li class="flex items-center gap-3"><!> </li>'),ra=x('<div class="font-light pb-2"> </div> <ul class="space-y-2 bg-secondary/5 border border-secondary/50 shadow shadow-secondary/10 py-3 px-5 rounded-lg"></ul>',1),sa=x('<div class="text-center font-light opacity-80 italic">No files selected</div>'),ia=x(`<div class="select-none flex flex-col gap-5"><div class="glass p-10"><p class="text-xl font-semibold">File Upload</p> <div class="py-2 opacity-60">Thank you for choosing to contribute in our research project. Please select files that you'd like to contribute to our system.</div> <div class="py-1 opacity-80">Help us improve our search by contributing. Contribution is a few-step process where you answer some questions about your files.</div></div> <div class="grid glass p-5 gap-3"><div class="p-3 glass grid text-center grid-cols-[1fr_50px_1fr] gap-10 items-center justify-center"><div class="grid gap-3"><div class="text-primary/50">Upload files individually.</div> <div class="flex items-center justify-center"><!></div></div> <div class="uppercase opacity-60 rounded border-y bg-secondary/20 border-secondary/60 h-full w-0.5 m-auto"></div> <div class="grid gap-3 items-center m-auto"><div class="text-primary/50">Fill out an excel file and upload it for us to process it later.</div> <a target="_blank" href="../template.xlsm" class="text-nowrap glass px-2 py-1 text-green-600/80 glass bg-green-600/10 border-green-600/50 flex gap-3 items-center justify-center hover:brightness-[90%] cursor-pointer"><div class="glass p-2 rounded-full bg-white/80 border-green-600/30"><!></div> <div class="text-center px-5">Download template</div></a> <!> <!></div></div> <div class="glass p-10"><!></div></div></div>`);function oa(d,t){me(t,!0);const[s,p]=Be(),l=()=>Se($e,"$filesStore",s),i=()=>Se(Ke,"$templateStore",s);let h=R(t,"proceed",15);Qe(()=>{var y;h((((y=l())==null?void 0:y.length)??0)>0)});var v=ia(),g=c(r(v),2),o=r(g),_=r(o),z=c(r(_),2),m=r(z);it(m,{text:"Select files",multiple:!0,get files(){return We(),l()},set files(y){Ge($e,U(y))}}),a(z),a(_);var b=c(_,4),f=c(r(b),2),k=r(f),N=r(k);re(N,{src:"../download.svg",class:"size-4 bg-green-600"}),a(k),Oe(2),a(f);var q=c(f,2),u=T(()=>{var y,w;return((w=(y=i())==null?void 0:y.item(0))==null?void 0:w.name)??"Upload excel file"});it(q,{class:"w-full",get text(){return e(u)},multiple:!1,accept:".xlsm",get files(){return We(),i()},set files(y){Ge(Ke,U(y))}});var M=c(q,2);{var E=y=>{var w=ta();w.__click=async()=>{const O=i();O&&(await Ct(O),Ke.set(void 0))},n(y,w)};F(M,y=>{var w;(((w=i())==null?void 0:w.length)??0)>0&&y(E)})}a(b),a(o);var X=c(o,2),H=r(X);{var ze=y=>{var w=ra();const O=T(()=>Array.from(l()??[]).map(D=>D.name));var se=W(w),ge=r(se);a(se);var be=c(se,2);ue(be,21,()=>e(O),fe,(D,Y)=>{var Z=aa(),pe=r(Z);re(pe,{src:"../checkmark-circle.svg",class:"size-3 bg-primary"});var G=c(pe);a(Z),C(()=>j(G,` ${e(Y)??""}`)),n(D,Z)}),a(be),C(()=>{var D;return j(ge,`Selected files (${((D=l())==null?void 0:D.length)??0??""}):`)}),n(y,w)},Me=y=>{var w=sa();n(y,w)};F(H,y=>{var w;(((w=l())==null?void 0:w.length)??0)>0?y(ze):y(Me,!1)})}a(X),a(g),a(v),n(d,v),xe(),p()}qe(["click"]);function la(d,t,s){t(0),s(void 0)}var na=x('<li><div class="flex gap-3"><div class="truncate w-[200px]"> </div> <div class="w-full bg-gray-50 border border-primary/10 glass overflow-hidden rounded-sm"><div class="bg-secondary/80 w-[0%] h-full transition-all glass rounded-sm"></div></div> <div class="w-[20%] text-right font-light"> </div></div></li>'),da=x('<div><div class="w-full border-b border-accent/10 mb-5"></div> <span class="font-nunito">You can safely close the tab or continue to upload more files.</span> <button class="px-3 py-2 rounded my-3 flex items-center gap-2 justify-center bg-secondary text-white">Upload more</button></div>'),ca=x('<div class="flex justify-center p-5"><div class="w-full"><img src="../tree_of_knowledge.svg" alt="Tree of knowledge" class="size-36 my-5 mx-auto rounded-full bg-secondary/5 p-5 shadow-lg shadow-secondary/30 border border-secondary"> <div class="text-lg font-bold">Submission</div> <div class="font-light">Thank you for answering our questions. Your files and answers are being uploaded and safely stored.</div> <div class="font-light text-red-400">Note: Indexing and processing happen in the background and may take some time before results are available.</div> <div class="glass p-5 my-5"><span class="font-mono text-xs uppercase">Progress</span> <ul class="space-y-2"></ul></div> <!></div></div>');function va(d,t){me(t,!0);const[s,p]=Be(),l=()=>Se(Re,"$uploadProgressStore",s);let i=R(t,"step",15),h=R(t,"files",15);var v=ca(),g=r(v),o=c(r(g),8),_=c(r(o),2);ue(_,5,l,fe,(b,f)=>{var k=na(),N=r(k),q=r(N),u=r(q,!0);a(q);var M=c(q,2),E=r(M);a(M);var X=c(M,2),H=r(X);C(()=>j(H,`${e(f).progress.toFixed(0)??""}%`)),a(X),a(N),a(k),C(()=>{j(u,e(f).file),lt(E,"style",`width: ${e(f).progress??""}%`)}),n(b,k)}),a(_),a(o);var z=c(o,2);{var m=b=>{var f=da(),k=c(r(f),4);k.__click=[la,i,h],a(f),ve(1,f,()=>Ce),n(b,f)};F(z,b=>{l().every(f=>f.progress>=100)&&b(m)})}a(g),a(v),n(d,v),xe(),p()}qe(["click"]);var ua=x('<div class="font-nunito opacity-30 pt-2 text-xs uppercase">Files</div>'),fa=x("<div><li><div><!> </div></li></div>"),ga=x('<div><div><div class="text-white glass bg-secondary z-20 absolute top-0 left-0 pr-30 text-nowrap py-1 px-5 cursor-pointer hidden group-hover:block"> </div> <!> <!></div> <!></div>'),pa=x('<div class="flex flex-col gap-4"><div class="flex gap-5 m-auto text-center whitespace-nowrap"><div class="glass w-min p-5 py-2 rounded-full"> </div> <div class="glass w-min p-5 py-2 rounded-full"><span class="text-secondary"> </span> | <span class="opacity-30"> </span></div></div> <div class="flex-1"><!></div></div>'),_a=(d,t)=>t(!1),ma=x('<button class="transition-all py-1 px-3 rounded bg-black text-white hover:bg-amber-500 cursor-pointer">Back</button>'),xa=(d,t)=>t(!0),ba=x('<button class="transition-all py-1 px-3 rounded bg-black text-white hover:bg-accent cursor-pointer disabled:bg-gray-400">Next</button>'),ha=x('<span class="font-nunito flex items-center gap-2"><!> Required</span>'),ya=x('<div class="glass p-5 grid gap-5 grid-cols-[minmax(min-content,300px)_auto] h-full"><div class="select-none glass px-4 py-2"><ul class="px-2 py-5 space-y-3"><li><!> File Selection</li> <!> <!> <li><!> Submission</li></ul></div> <div class="glass p-10 grid grid-rows-[auto_min-content]"><!> <div class="flex justify-between gap-5 py-5"><!> <!> <!></div></div></div>'),wa=x('<div class="flex items-center justify-center h-full"><div class="glass text-primary p-10 shadow-lg w-[90%] max-w-[500px]">Contribution is not supported on mobile devices due to poor user experience.</div></div>');function Ea(d,t){me(t,!0);const[s,p]=Be(),l=()=>Se(dt,"$questionsStore",s),i=()=>Se($e,"$filesStore",s);Nt(async()=>{await Ut()});let h=ce(0),v=ce(!1),g=T(()=>{var u;return 1+l().length*(((u=i())==null?void 0:u.length)??1)}),o=ce(0),_=T(()=>Array.from(i()??[]).flatMap(u=>{const M=l().map(E=>({question_id:E.id,tags:[],selection:[]}));return{file:u.name,answers:M}})),z=T(()=>e(_)[Math.floor((e(o)-1)/l().length)]),m=T(()=>{var u;return(u=e(z))==null?void 0:u.answers[(e(o)-1)%l().length]});function b(u){i()&&(L(o,U(Math.min(Math.max(e(o)+(u?1:-1),0),1+l().length*i().length))),L(v,!1))}Qe(()=>{if(e(o)===e(g)){const u=i();u&&u.length>0&&jt(u,e(_))}});var f=ae(),k=W(f);{var N=u=>{var M=ya(),E=r(M),X=r(E),H=r(X),ze=r(H),Me=T(()=>`../${(e(o)>=1?"checkmark.svg":"circle.svg")??""}`);re(ze,{get src(){return e(Me)},class:"size-3 bg-secondary"}),Oe(),a(H);var y=c(H,2);{var w=S=>{var A=ua();n(S,A)};F(y,S=>{var A;(((A=i())==null?void 0:A.length)??0)>0&&S(w)})}var O=c(y,2);ue(O,1,()=>Array.from(i()??[]),fe,(S,A,ee)=>{var ie=ga();const he=T(()=>e(o)>=ee*l().length+1&&e(o)<(ee+1)*l().length+1),P=T(()=>e(o)>=(ee+1)*l().length+1),I=T(()=>e(P)?"bg-lime-400":"bg-primary");var oe=r(ie),Te=r(oe),Fe=r(Te,!0);a(Te);var Ne=c(Te,2),He=T(()=>`../${(e(he)?"chevron-down.svg":e(P)?"checkmark.svg":"circle.svg")??""}`);re(Ne,{get src(){return e(He)},get class(){return`size-3 ${e(I)??""}`}});var Ye=c(Ne,2);{var Pe=K=>{var V=Ve();const le=T(()=>e(A).name.slice(0,3)??""),ye=T(()=>e(A).name.slice(-5)??"");C(()=>j(V,`${e(le)} ... ${e(ye)}`)),n(K,V)},te=K=>{var V=Ve();C(()=>j(V,e(A).name)),n(K,V)};F(Ye,K=>{e(A).name.length>10?K(Pe):K(te,!1)})}a(oe);var Ue=c(oe,2);ue(Ue,1,l,fe,(K,V,le)=>{var ye=ae();const we=T(()=>e(o)==1+le+ee*l().length),Le=T(()=>e(o)>1+le+ee*l().length);var Ee=W(ye);{var Je=ne=>{var je=fa(),Xe=r(je),Ze=r(Xe),at=r(Ze),vt=T(()=>`../${(e(Le)?"checkmark.svg":e(we)?"chevron-right.svg":"circle.svg")??""}`);re(at,{get src(){return e(vt)},class:"w-3 h-3 bg-secondary"});var ut=c(at);a(Ze),a(Xe),a(je),C(()=>{de(Xe,`pt-2 pl-5 ${(e(Le)||e(we)?"":"opacity-30")??""}`),de(Ze,`flex gap-3 items-center ${(e(we)?"text-secondary":"")??""}`),j(ut,` ${e(V).title??""}`)}),ve(1,je,()=>st),ve(2,je,()=>st),n(ne,je)};F(Ee,ne=>{e(he)&&ne(Je)})}n(K,ye)}),a(ie),C(()=>{de(ie,`glass group relative px-3 py-1 shadow-sm border ${(e(P)?"border-lime-400 bg-lime-400/10":"")??""}`),de(oe,`flex items-center gap-2 ${(e(P)?"text-lime-500":"")??""} `),j(Fe,e(A).name)}),n(S,ie)});var ge=c(O,2),be=r(ge),D=T(()=>`../${(e(o)===e(g)?"checkmark.svg":"circle.svg")??""}`);re(be,{get src(){return e(D)},class:"z-0 size-3 bg-secondary"}),Oe(),a(ge),a(X),a(E);var Y=c(E,2),Z=r(Y);{var pe=S=>{oa(S,{get proceed(){return e(v)},set proceed(A){L(v,U(A))}})},G=S=>{var A=ae(),ee=W(A);{var ie=P=>{va(P,{get step(){return e(o)},set step(I){L(o,U(I))},get files(){return We(),i()},set files(I){Ge($e,U(I))}})},he=P=>{var I=ae(),oe=W(I);{var Te=Fe=>{var Ne=ae();const He=T(()=>l().filter(Pe=>{var te;return Pe.id===((te=e(m))==null?void 0:te.question_id)})[0]);var Ye=W(Ne);Pt(Ye,()=>e(o),Pe=>{var te=pa(),Ue=r(te),Ie=r(Ue),K=r(Ie,!0);a(Ie);var V=c(Ie,2),le=r(V),ye=r(le,!0);a(le);var we=c(le,2),Le=r(we,!0);a(we),a(V),a(Ue);var Ee=c(Ue,2),Je=r(Ee);Qt(Je,{get question(){return e(He)},get answer(){return e(m)},get proceed(){return e(v)},set proceed(ne){L(v,U(ne))}}),a(Ee),a(te),C(()=>{var ne;j(K,(ne=e(z))==null?void 0:ne.file),j(ye,(e(o)-1)%l().length+1),j(Le,l().length)}),ve(1,te,()=>Ce),n(Pe,te)}),n(Fe,Ne)};F(oe,Fe=>{e(m)&&Fe(Te)},!0)}n(P,I)};F(ee,P=>{e(o)===e(g)?P(ie):P(he,!1)},!0)}n(S,A)};F(Z,S=>{e(o)===0?S(pe):S(G,!1)})}var $=c(Z,2),B=r($);{var Ae=S=>{var A=ma();A.__click=[_a,b],n(S,A)};F(B,S=>{e(o)>=1&&e(o)!==e(g)&&S(Ae)})}var _e=c(B,2);At(_e);var Q=c(_e,2);{var J=S=>{var A=ae(),ee=W(A);{var ie=P=>{var I=ba();I.__click=[xa,b],n(P,I)},he=P=>{var I=ha(),oe=r(I);re(oe,{src:"../chevron-right.svg",class:"size-3 bg-secondary animate-pulse"}),Oe(),a(I),n(P,I)};F(ee,P=>{e(v)?P(ie):P(he,!1)})}n(S,A)};F(Q,S=>{e(o)<e(g)&&S(J)})}a($),a(Y),a(M),C(()=>{de(H,`glass px-3 py-2 flex items-center gap-3 ${(e(o)===0?"bg-secondary/5 shadow-secondary/30 border-secondary text-secondary":"")??""}`),de(ge,`glass px-3 py-2 flex items-center gap-3 ${(e(o)===e(g)?"font-bold":"")??""}`)}),n(u,M)},q=u=>{var M=wa();n(u,M)};F(k,u=>{e(h)>1e3?u(N):u(q,!1)})}Mt("innerWidth",u=>L(h,U(u))),n(d,f),xe(),p()}qe(["click"]);export{Ea as component};
