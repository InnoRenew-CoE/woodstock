import{a as h,t as y}from"../chunks/disclose-version.c5RT6EqX.js";import{t as R,s as m,g as i,c as l,d as L,r as d,p as J,a as W,e as x,b as q}from"../chunks/runtime.DYzcDKcF.js";import{s as S,i as z}from"../chunks/if.Ba5utbC_.js";import{d as D}from"../chunks/events.CeP5UziP.js";import{t as M,a as P}from"../chunks/index.B3UbB_ia.js";import{p as I}from"../chunks/misc.zxKZcHum.js";import{o as G}from"../chunks/index-client.CqnO2eDw.js";import{g as B}from"../chunks/entry.W8c5aS8K.js";import{P as j}from"../chunks/public.CD978DOo.js";import{v as H}from"../chunks/index.CnSOBvTa.js";import{M as O,r as T,a as A,s as K}from"../chunks/MaskedIcon.CgIIQlzR.js";import{a as Q,b as V}from"../chunks/input.B4lCoamq.js";import{p as v}from"../chunks/props.Dq7OeSMe.js";import"../chunks/SuggestiveInput.zsVi4K-w.js";import{p as _}from"../chunks/notifications.Q_goho1Y.js";var X=y('<label class="select-none cursor-pointer rounded flex items-center gap-3"><input class="hidden" type="checkbox"> <!> </label>');function Z(f,e){v(e,"class",3,"");let a=v(e,"checked",15);var t=X(),r=l(t);T(r);var o=m(r,2),g=L(()=>` ${(a()?"./checkmark-selected-box.svg":"./checkmark-box.svg")??""}`),c=L(()=>`size-4 ${(a()?"bg-secondary":"bg-black")??""}`);O(o,{get src(){return i(g)},get class(){return i(c)}});var p=m(o);d(t),R(()=>S(p,` ${e.label??""}`)),Q(r,a),h(f,t)}var $=y('<div class="flex items-center bg-white hover:border-secondary border border-accent focus:shadow rounded-md group font-sans focus-within:border-secondary"><!> <input></div>');function N(f,e){let a=v(e,"type",3,"text"),t=v(e,"class",3,""),r=v(e,"value",15),o=v(e,"icon",3,void 0),g=v(e,"required",3,!1);var c=$(),p=l(c);{var w=b=>{O(b,{get src(){return o()},class:"size-3 bg-primary ml-3 opacity-30 group-focus-within:opacity-100 group-hover:opacity-100 group-hover:bg-secondary group-focus-within:bg-secondary"})};z(p,b=>{o()&&b(w)})}var n=m(p,2);T(n),d(c),R(()=>{n.required=g(),A(n,"type",a()),A(n,"placeholder",e.placeholder),K(n,`w-full px-2 py-2 outline-none transition-all ease-in-out rounded-md placeholder:text-primary/40 bg-transparent group-hover:placeholder:text-secondary ${t()??""} svelte-33uumo`)}),V(n,r),h(f,c)}async function ee(f,e,a,t){const r={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i(e),password:i(a)})};i(t)?(await fetch(`${j}/register`,r)).status===200?(_({body:"You'll receive an email with newly generated password.",title:"Request successful"}),x(t,!1)):_({body:"An error occured, please notify us at woodstock@innorenew.eu",title:"Request failed"}):(await fetch(`${j}/login`,r)).status===200?(_({body:"Succesfull login",title:"Welcome"}),await B("/app")):_({body:"Incorrect login credentials",title:"Failure to login"})}var re=y("<div><!></div>"),te=y(`<div><p class="bg-secondary/5 border border-secondary p-3 rounded text-sm">You'll receive an email with password for you to access the app.</p></div>`),ae=y('<div class="flex justify-center h-full p-10"><div class="grid gap-2 max-w-[400px] w-[80%] h-min"><form class="grid p-5 px-8 rounded-xl border border-accent shadow-lg gap-5 bg-accent/[2%]"><div class="flex gap-3 items-center text-lg justify-center font-mono text-accent">Login <span><img src="./info.svg" alt="Information" class="w-3"></span></div> <!> <!> <!> <button type="submit" class="transition-all hover:bg-primary cursor-pointer bg-accent/70 border border-accent/80 rounded-md p-2 text-white grid grid-cols-[1rem_auto_1rem] items-center gap-4 group"><div class="row-start-1 col-start-2"> </div></button></form></div></div>');function ye(f,e){J(e,!0);let a=q(""),t=q(""),r=q(!1);G(async()=>{await H()===200&&await B("/app")});var o=ae(),g=l(o),c=l(g),p=m(l(c),2);N(p,{required:!0,placeholder:"Organisation e-mail",type:"email",icon:"../email.svg",get value(){return i(a)},set value(s){x(a,I(s))}});var w=m(p,2);Z(w,{label:"Request access",get checked(){return i(r)},set checked(s){x(r,I(s))}});var n=m(w,2);{var b=s=>{var u=re(),E=l(u);N(E,{required:!0,placeholder:"Password",type:"password",icon:"../password.svg",get value(){return i(t)},set value(F){x(t,I(F))}}),d(u),M(1,u,()=>P),h(s,u)},U=s=>{var u=te();M(1,u,()=>P),h(s,u)};z(n,s=>{i(r)?s(U,!1):s(b)})}var k=m(n,2);k.__click=[ee,a,t,r];var C=l(k),Y=l(C,!0);d(C),d(k),d(c),d(g),d(o),R(()=>S(Y,i(r)?"Request":"Login")),h(f,o),W()}D(["click"]);export{ye as component};
